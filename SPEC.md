# Universe25 Simulator - Simple 仕様書

## 1. プロジェクト概要

### 1.1 目的
ジョン・B・カルフーンの「ユニバース25実験」をシミュレートするWebアプリケーション。楽園環境にもかかわらず個体数が増加→少子化→絶滅という過程を視覚的に体験できる教育ツール。

### 1.2 対象ユーザー
- 教育機関（授業での使用）
- 社会問題（少子化、過密問題）に興味がある一般ユーザー
- 行動科学に興味がある学習者

### 1.3 使用環境
- モダンブラウザ（Chrome, Firefox, Safari, Edge）
- デスクトップ環境推奨（画面幅: 最低1024px）

---

## 2. ユニバース25実験について

### 2.1 実験の背景
- 実施者: ジョン・B・カルフーン（John B. Calhoun）
- 実験年: 1968-1972年
- 実験環境: 2.7m × 2.7m の箱型空間
- 初期個体数: 8匹（オス4匹、メス4匹）
- 最大収容可能数: 約3,000匹

### 2.2 実験の4つのフェーズ

| フェーズ | 名称 | 期間 | 特徴 |
|---------|------|------|------|
| Phase A | 適応期（Adjustment） | 1-104日 | 環境への適応、最初の出産 |
| Phase B | 成長期（Exploitation） | 105-315日 | 急速な個体数増加、社会階層化 |
| Phase C | 停滞期（Stagnation） | 316-560日 | 暴力増加、成長鈍化、社会崩壊の始まり |
| Phase D | 死滅期（Death） | 560日以降 | 出生率低下、「美しき者」の出現、絶滅へ |

### 2.3 主要な観察結果
- 食料・水・住居が十分にあっても、過密により社会が崩壊
- 「美しき者（The Beautiful Ones）」: 毛づくろいのみを行い、繁殖に興味を示さないオス
- 攻撃的個体の増加
- メスの母性行動の喪失
- 最終的に全個体が絶滅

---

## 3. アプリケーション仕様

### 3.1 画面レイアウト

```
+----------------------------------+----------------------------------+
|                                  |                                  |
|     左側（50%）                   |     右側（50%）                   |
|                                  |                                  |
|   ┌────────────────────┐         |   【統計情報】                    |
|   │                    │         |   - 経過日数                      |
|   │   2.7m × 2.7m     │         |   - 総個体数                      |
|   │   の箱             │         |   - 1日あたり出生数               |
|   │                    │         |   - 出生率（%）                   |
|   │   ● ● ● ● ●       │         |   - 現在のフェーズ                |
|   │   ● ● ● ● ●       │         |                                  |
|   │   （ドット表示）    │         |   【グラフ】                      |
|   │                    │         |   - 個体数推移                    |
|   │                    │         |   - 出生率推移                    |
|   └────────────────────┘         |                                  |
|                                  |   【コントロール】                 |
|                                  |   [開始][停止][リセット]          |
|                                  |   速度調整: 0.5x - 5x            |
+----------------------------------+----------------------------------+
```

### 3.2 シミュレーション時間設定

| 項目 | 設定値 |
|------|--------|
| 1日の実行時間（デフォルト） | 0.1秒 |
| 1,000日の実行時間 | 約1.5分 |
| 速度調整範囲 | 0.5x 〜 5x |
| 最遅実行時間（0.5x） | 約3分（1,000日） |
| 最速実行時間（5x） | 約18秒（1,000日） |
| シミュレーション総日数 | 約1,000-1,500日 |

### 3.3 視覚表現

#### 3.3.1 左側: 箱とドット表示
- **箱**: 2.7m × 2.7m を表現する正方形
- **ドット**: 各マウスを小さな円（ドット）で表示
- **色分け**:
  - 🟢 緑: 正常個体
  - 🔵 青: 美しき者（The Beautiful Ones）
  - 🔴 赤: 攻撃的個体

#### 3.3.2 右側: 統計情報
- **数値表示項目**:
  - 経過日数
  - 総個体数
  - 正常個体数
  - 美しき者の数
  - 攻撃的個体数
  - 1日あたり出生数
  - 出生率（%）
  - 死亡率（%）
  - 現在の密度（%）

- **フェーズ表示**:
  - Phase A: 適応期（1-104日）- 緑色
  - Phase B: 成長期（105-315日）- 黄色
  - Phase C: 停滞期（316-560日）- オレンジ色
  - Phase D: 死滅期（560日以降）- 赤色

#### 3.3.3 グラフ表示
1. **個体数推移グラフ**（折れ線グラフ）
   - X軸: 経過日数
   - Y軸: 個体数
   - 表示項目:
     - 総個体数
     - 正常個体数
     - 美しき者
     - 攻撃的個体

2. **出生率推移グラフ**（折れ線グラフ）
   - X軸: 経過日数
   - Y軸: 出生率（%）
   - 少子化の進行を視覚化

### 3.4 コントロール機能

| 機能 | 説明 |
|------|------|
| 開始ボタン | シミュレーションを開始 |
| 停止ボタン | シミュレーションを一時停止 |
| リセットボタン | シミュレーションを初期状態（8匹）に戻す |
| 速度スライダー | 0.5x, 1x, 2x, 3x, 4x, 5x の6段階 |

---

## 4. シミュレーションロジック

### 4.1 初期条件
```javascript
{
  initialPopulation: 8,           // 初期個体数
  maxCapacity: 3000,              // 最大収容数
  boxSize: 2.7,                   // 箱のサイズ（メートル）
  startDay: 0                     // 開始日
}
```

### 4.2 個体の分類
- **正常個体（Normal）**: 通常の繁殖・社会行動を行う
- **美しき者（Beautiful Ones）**: 繁殖せず、毛づくろいのみ
- **攻撃的個体（Aggressive）**: 過度に攻撃的、社会性低下

### 4.3 出生ロジック

#### Phase A（1-104日）
- 出生率: 高い（100%）
- 1日あたりの出生数 = 個体数 × 0.15

#### Phase B（105-315日）
- 出生率: やや高い（90%）
- 社会階層化の開始

#### Phase C（316-560日）
- 出生率: 密度依存で低下（50% × (1 - 密度係数)）
- 密度係数 = 現在個体数 / 最大収容数

#### Phase D（560日以降）
- 出生率: 極端に低下（10% × (1 - 密度係数)）
- 「美しき者」の増加により繁殖個体減少

### 4.4 死亡ロジック
- 基本死亡率: 0.1% / 日
- ストレス死亡率: 密度に比例して増加
- 死亡率 = 基本死亡率 × (1 + 密度係数 × 5)

### 4.5 行動変化ロジック
- **密度 > 60%**: 正常個体 → 攻撃的個体 or 美しき者
- **密度 > 80%**: 変化率が加速
- 変化率 = 0.1% × 密度係数 / 日

### 4.6 密度計算
```javascript
density = currentPopulation / maxCapacity
socialStress = density^2
```

---

## 5. 技術仕様

### 5.1 技術スタック
- **HTML5**: 構造
- **CSS3**: スタイリング（CSS Grid, Flexbox）
- **JavaScript (ES6+)**: ロジック実装
- **Canvas API**: ドット描画
- **Chart.js**: グラフ描画

### 5.2 ファイル構成
```
universe25-simulator-simple/
├── index.html          # メインファイル（単一HTMLファイル）
├── README.md           # プロジェクト説明
├── SPEC.md            # 本仕様書
└── LICENSE            # ライセンス（MIT）
```

### 5.3 外部ライブラリ
- **Chart.js** (CDN): グラフ描画
  - バージョン: 最新安定版
  - URL: https://cdn.jsdelivr.net/npm/chart.js

### 5.4 ブラウザ対応
- Chrome: 最新版
- Firefox: 最新版
- Safari: 最新版
- Edge: 最新版

---

## 6. データ更新頻度

| 項目 | 更新頻度 |
|------|---------|
| シミュレーション計算 | 0.1秒ごと（デフォルト速度） |
| 画面描画（Canvas） | 0.1秒ごと |
| グラフ更新 | 10日ごと（データポイント追加） |
| 統計情報更新 | 1日ごと |

---

## 7. 教育的配慮

### 7.1 説明テキスト
各フェーズで以下の教育的メッセージを表示：

- **Phase A**: 「環境に適応し、順調に繁殖が始まります」
- **Phase B**: 「豊富な資源により、個体数が急増しています」
- **Phase C**: 「過密により社会行動が崩壊し始めています。攻撃性が高まり、異常行動が増えています」
- **Phase D**: 「出生率が極端に低下しています。楽園にもかかわらず、なぜでしょうか？」

### 7.2 考察ポイント
- なぜ食料・水が十分にあっても絶滅したのか？
- 人間社会の少子化問題との共通点は？
- 過密社会のストレスとは？
- 「美しき者」は現代社会に存在するか？

---

## 8. 今後の拡張案（Simple版では未実装）

- パラメータ調整機能（初期個体数、最大収容数など）
- データエクスポート機能（CSV）
- 複数実験の比較機能
- より詳細な行動シミュレーション
- 音響効果
- モバイル対応

---

## 9. 参考文献

1. Calhoun, J. B. (1962). "Population density and social pathology". Scientific American.
2. Calhoun, J. B. (1973). "Death Squared: The Explosive Growth and Demise of a Mouse Population". Proceedings of the Royal Society of Medicine.
3. Ramsden, E., & Adams, J. (2009). "Escaping the laboratory: the rodent experiments of John B. Calhoun & their cultural influence". Journal of Social History.

---

## 10. バージョン履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|---------|
| 0.1.0 | 2025-10-23 | 初版作成 |
